<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Ajax</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../../../../css/study/main.css">
</head>
<body>
  <div class="wrap">
    <div class="wrap-title">
      <h1 class="title h1">Study - AJAX - fetch</h1>
      <ol>
        <li><button id="btnHtml" data-file-name="html">Load HTML file</button></li>
        <li><button id="btnCss" data-file-name="css">Load CSS file</button></li>
        <li><button id="btnJs" data-file-name="javascript">Load JAVASCRIPT file</button></li>
      </ol>
    </div>
    <div class="wrap-view">
      <h2 class="title sub">Result Area</h2>
      <article id="articleResult"></article>
    </div>
    <div class="wrap-code">
      <h2 class="title sub">View Code</h2>
      <div class="code-box">
        <h3 class="title h3">main point</h3>
        <pre class="main-point">
// Must be connected to the server
fetch(fileName).then(function(response){ // fileName + "file type (ex - .html)"
  response.text().then(function(text){
    return document.getElementById("tag").innerHTML = text;
  });
})
        </pre>
      </div>
      <div class="code-box">
        <h3 class="title h3">Uses</h3>
        <pre>
// file load
var load = {
  // function fetch
  loadFile: function(fileName) { // fileName is value of dataset ... See bottom
    var articleResult = document.getElementById("articleResult");
    var fileType = ".html";
    fetch(fileName+fileType).then(function(response){
        if(response.status === 404) { // if Not found file 
          alert(fileName + fileType + " file is Not Found 404 Error!")
        } else { // status 200 ok
          response.text().then(function(text){
            return articleResult.innerHTML = text;
          });
        }
    })
  }
}
var btn = {
  click: function() {
    var btns = document.getElementsByTagName("button");
    var btnsLength = btns.length;
    for(var i=0; i < btnsLength; i++){
      var btnsI = btns[i];
      btnsI.onclick = function() {
        load.loadFile(this.dataset.fileName); // get and set value of dataset 
      }
    }
  }
}
// button click function start
btn.click();
        </pre>
      </div>
    </div>
  </div>

  <script>
    // file load
    var load = {
      // function fetch
      loadFile: function(fileName) { // fileName is value of dataset ... See bottom
        var articleResult = document.getElementById("articleResult");
        var fileType = ".html";
        fetch(fileName+fileType).then(function(response){
            if(response.status === 404) { // if Not found file 
              alert(fileName + fileType + " file is Not Found 404 Error!")
            } else { // status 200 ok
              response.text().then(function(text){
                return articleResult.innerHTML = text;
              });
            }
        })
      }
    }
    var btn = {
      click: function() {
        var btns = document.getElementsByTagName("button");
        var btnsLength = btns.length;
        for(var i=0; i < btnsLength; i++){
          var btnsI = btns[i];
          btnsI.onclick = function() {
            load.loadFile(this.dataset.fileName); // get and set value of dataset 
          }
        }
      }
    }
    // button click function start
    btn.click();
  </script>
</body>
</html>
